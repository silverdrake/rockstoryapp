<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
	<title>RÖCK STORŸ</title>

	<script type="text/javascript" src="lib/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="lib/mustache.js"></script>
	<script type="text/javascript" src="cardrender.js"></script>

	<link rel="stylesheet" href="cardrender.css">



</head>
<body>

<div id="content_main"></div>


</body>

<script id="file_card_artist" type="text/mustache">

	<div class="cardfile artist" >

		<div class="cardfile_bgr" style="background-image: url('res/rockstory/cards/artist/{{ imageid }}.png')">
		</div>

		<div class="cardfile_title">

			{{ name }}

		</div>

		<div class="cardfile_content">
			Born in a mining town in 1958, when black and white TV was up to date.<br>

		</div>

	</div>

</script>


<script id="file_card_activity" type="text/mustache">

	<div class="cardfile activity" >

		<div class="cardfile_bgr" style="background-image: url('res/rockstory/cards/activity/{{ imageid }}_sepia.png')">
		</div>

		<div class="cardfile_title">

			{{ title }}

		</div>

		<div class="cardfile_content">
			<div class="cardrule">
				{{{rule_base}}}
			</div>


			<div class="cardrule">
				{{{rule_custom}}}
			</div>
		</div>




	</div>

</script>

<script id="file_card_modevent" type="text/mustache">

	<div class="cardfile modevent" >

		<div class="cardfile_bgr" style="background-image: url('res/rockstory/cards/modevent/web/{{ imageid }}_sepiacol.png')">
		</div>

		<div class="cardfile_title">

			{{ title }}

		</div>

		<div class="cardfile_content">

			<div class="modevent_cat">
				{{ cat }}
			</div>

			{{ #rule }}
				{{{rule}}}
			{{ /rule}}

			{{ #interrupt }}
				{{{interrupt}}}
			{{ /interrupt}}

		</div>

	</div>

</script>


<script type="text/javascript">




	const URL_CARDS = "data/rscards.json";

	$(function ()
	{
		var params = window.location.search.substr(1).split("&");
		var cardid = null;
		for (var p = 0; p < params.length; p++)
		{
			var keyval = params[p].split("=");
			(keyval[0] == "card") && (cardid = keyval[1]);
		}

		loadRenderCard (cardid);
	});

	function loadRenderCard (cardid)
	{
		$.ajax(URL_CARDS).done(function(data) {
			var card = data[cardid];
			if (!card)
			{
				throw ("MissingCardException");
			}
			else
			{
				renderCard(card);
			}


		});


	}


</script>

</html>
